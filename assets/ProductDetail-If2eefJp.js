import{C as e,j as s}from"./index-cPf8uUct.js";import{d as a,e as i,u as t,b as r}from"./vendor-CY12d32z.js";function c(){var c;const{id:l}=a(),n=i(),d=t(),{addToCart:o}=r.useContext(e),[u,h]=r.useState(null),[m,p]=r.useState(!0),[j,x]=r.useState(null),[v,N]=r.useState(""),[g,f]=r.useState(0),[y,b]=r.useState(!1);r.useEffect((()=>{(async()=>{var e,s,a,i,t,r,c,d,o;if(x(null),p(!0),null==(e=n.state)?void 0:e.product)return h(n.state.product),void p(!1);const u={method:"GET",headers:{"X-RapidAPI-Key":"79f78136ffmsh2587f6e96e44266p1dddc5jsne1f773947bac","X-RapidAPI-Host":"apidojo-hm-hennes-mauritz-v1.p.rapidapi.com"}};try{const e=await fetch(`https://apidojo-hm-hennes-mauritz-v1.p.rapidapi.com/products/detail?lang=en&country=us&productcode=${l}`,u);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();if(console.log("Product Detail API Response:",n),!n||!n.product)throw new Error("Invalid product data received from API");const m=(null==(i=null==(a=null==(s=n.product.articlesList)?void 0:s[0])?void 0:a.galleryDetails)?void 0:i.map((e=>e.url)))||[null==(d=null==(c=null==(r=null==(t=n.product.articlesList)?void 0:t[0])?void 0:r.normalPicture)?void 0:c[0])?void 0:d.url];h({id:n.product.code||l,name:n.product.name||"Product Name",price:(null==(o=n.product.whitePrice)?void 0:o.price)||0,images:m,description:n.product.description||"No description available",sizes:n.product.variantSizes||[],category:n.product.categoryName||"Uncategorized",details:n.product.materialDetails||[],care:n.product.careInstructions||[]})}catch(m){console.error("Error:",m),x(m.message||"Failed to fetch product details")}finally{p(!1)}})()}),[l,n]);return m?s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"loader"}),s.jsx("p",{children:"Loading product details..."})]}):j?s.jsxs("div",{className:"error-container",children:[s.jsx("h2",{children:"Error"}),s.jsx("p",{children:j}),s.jsx("button",{onClick:()=>window.location.reload(),children:"Try Again"})]}):u?s.jsx("div",{className:"product-detail-page",children:s.jsxs("div",{className:"product-detail-container",children:[s.jsxs("div",{className:"product-gallery",children:[s.jsx("div",{className:"main-image-container",children:s.jsx("img",{src:u.images[g],alt:u.name,className:"main-product-image"})}),s.jsx("div",{className:"thumbnail-container",children:u.images.map(((e,a)=>s.jsx("img",{src:e,alt:`${u.name} view ${a+1}`,className:"thumbnail "+(g===a?"active":""),onClick:()=>f(a)},a)))})]}),s.jsxs("div",{className:"product-info",children:[s.jsxs("div",{className:"product-header",children:[s.jsx("h1",{children:u.name}),s.jsx("p",{className:"category",children:u.category}),s.jsxs("p",{className:"price",children:["$",u.price]})]}),s.jsxs("div",{className:"virtual-try-on-banner",children:[s.jsx("div",{className:"try-on-icon",children:s.jsx("i",{className:"fas fa-camera"})}),s.jsxs("div",{className:"try-on-info",children:[s.jsx("h3",{children:"Virtual Try-On Available!"}),s.jsx("p",{children:"See how this looks on you using our AR technology"})]}),s.jsx("button",{className:"try-on-button",onClick:()=>{d("/try-on",{state:{product:u}})},children:"Try It On"})]}),s.jsxs("div",{className:"product-description",children:[s.jsx("h3",{children:"Description"}),s.jsx("p",{children:u.description})]}),u.sizes&&u.sizes.length>0&&s.jsxs("div",{className:"size-selection",children:[s.jsx("h3",{children:"Select Size"}),s.jsx("div",{className:"size-options",children:u.sizes.map((e=>s.jsxs("button",{className:`size-btn ${v===e.name?"active":""} ${"in_stock"!==e.availability?"out-of-stock":""}`,onClick:()=>N(e.name),disabled:"in_stock"!==e.availability,children:[e.name,"in_stock"!==e.availability&&s.jsx("span",{className:"out-of-stock-label",children:"Out of Stock"})]},e.name)))})]}),s.jsxs("div",{className:"product-actions",children:[s.jsx("button",{className:"add-to-cart-btn "+(y?"added":""),onClick:()=>{var e;!v&&(null==(e=u.sizes)?void 0:e.length)>0?alert("Please select a size"):(o({id:u.id,name:u.name,price:u.price,image:u.images[0],size:v,quantity:1}),b(!0),setTimeout((()=>b(!1)),3e3))},disabled:(null==(c=u.sizes)?void 0:c.length)>0&&!v,children:y?"Added to Cart âœ“":"Add to Cart"}),s.jsxs("button",{className:"try-on-btn",children:[s.jsx("i",{className:"fas fa-camera"}),"Virtual Try-On"]})]}),(u.details.length>0||u.care.length>0)&&s.jsxs("div",{className:"product-additional-info",children:[u.details.length>0&&s.jsxs("div",{className:"product-details",children:[s.jsx("h3",{children:"Product Details"}),s.jsx("ul",{children:u.details.map(((e,a)=>s.jsx("li",{children:e},a)))})]}),u.care.length>0&&s.jsxs("div",{className:"care-instructions",children:[s.jsx("h3",{children:"Care Instructions"}),s.jsx("ul",{children:u.care.map(((e,a)=>s.jsx("li",{children:e},a)))})]})]})]})]})}):s.jsxs("div",{className:"error-container",children:[s.jsx("h2",{children:"Product Not Found"}),s.jsx("p",{children:"Sorry, we couldn't find the product you're looking for."}),s.jsx("button",{onClick:()=>window.history.back(),children:"Go Back"})]})}export{c as default};
