import{a as O,b as R,u as _,r,C as F,j as e}from"./index-DR5I9B7h.js";function H(){var g;const{id:o}=O(),d=R(),w=_(),{addToCart:T}=r.useContext(F),[s,u]=r.useState(null),[z,l]=r.useState(!0),[h,m]=r.useState(null),[n,A]=r.useState(""),[p,I]=r.useState(0),[j,x]=r.useState(!1);r.useEffect(()=>{(async()=>{var f,v,N,y,b,k,C,P,S;if(m(null),l(!0),(f=d.state)!=null&&f.product){u(d.state.product),l(!1);return}const i={method:"GET",headers:{"X-RapidAPI-Key":"79f78136ffmsh2587f6e96e44266p1dddc5jsne1f773947bac","X-RapidAPI-Host":"apidojo-hm-hennes-mauritz-v1.p.rapidapi.com"}};try{const c=await fetch(`https://apidojo-hm-hennes-mauritz-v1.p.rapidapi.com/products/detail?lang=en&country=us&productcode=${o}`,i);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const t=await c.json();if(console.log("Product Detail API Response:",t),!t||!t.product)throw new Error("Invalid product data received from API");const D=((y=(N=(v=t.product.articlesList)==null?void 0:v[0])==null?void 0:N.galleryDetails)==null?void 0:y.map(L=>L.url))||[(P=(C=(k=(b=t.product.articlesList)==null?void 0:b[0])==null?void 0:k.normalPicture)==null?void 0:C[0])==null?void 0:P.url];u({id:t.product.code||o,name:t.product.name||"Product Name",price:((S=t.product.whitePrice)==null?void 0:S.price)||0,images:D,description:t.product.description||"No description available",sizes:t.product.variantSizes||[],category:t.product.categoryName||"Uncategorized",details:t.product.materialDetails||[],care:t.product.careInstructions||[]})}catch(c){console.error("Error:",c),m(c.message||"Failed to fetch product details")}finally{l(!1)}})()},[o,d]);const E=()=>{var a;if(!n&&((a=s.sizes)==null?void 0:a.length)>0){alert("Please select a size");return}T({id:s.id,name:s.name,price:s.price,image:s.images[0],size:n,quantity:1}),x(!0),setTimeout(()=>x(!1),3e3)},$=()=>{w("/try-on",{state:{product:s}})};return z?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loader"}),e.jsx("p",{children:"Loading product details..."})]}):h?e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:h}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Try Again"})]}):s?e.jsx("div",{className:"product-detail-page",children:e.jsxs("div",{className:"product-detail-container",children:[e.jsxs("div",{className:"product-gallery",children:[e.jsx("div",{className:"main-image-container",children:e.jsx("img",{src:s.images[p],alt:s.name,className:"main-product-image"})}),e.jsx("div",{className:"thumbnail-container",children:s.images.map((a,i)=>e.jsx("img",{src:a,alt:`${s.name} view ${i+1}`,className:`thumbnail ${p===i?"active":""}`,onClick:()=>I(i)},i))})]}),e.jsxs("div",{className:"product-info",children:[e.jsxs("div",{className:"product-header",children:[e.jsx("h1",{children:s.name}),e.jsx("p",{className:"category",children:s.category}),e.jsxs("p",{className:"price",children:["$",s.price]})]}),e.jsxs("div",{className:"virtual-try-on-banner",children:[e.jsx("div",{className:"try-on-icon",children:e.jsx("i",{className:"fas fa-camera"})}),e.jsxs("div",{className:"try-on-info",children:[e.jsx("h3",{children:"Virtual Try-On Available!"}),e.jsx("p",{children:"See how this looks on you using our AR technology"})]}),e.jsx("button",{className:"try-on-button",onClick:$,children:"Try It On"})]}),e.jsxs("div",{className:"product-description",children:[e.jsx("h3",{children:"Description"}),e.jsx("p",{children:s.description})]}),s.sizes&&s.sizes.length>0&&e.jsxs("div",{className:"size-selection",children:[e.jsx("h3",{children:"Select Size"}),e.jsx("div",{className:"size-options",children:s.sizes.map(a=>e.jsxs("button",{className:`size-btn ${n===a.name?"active":""} ${a.availability!=="in_stock"?"out-of-stock":""}`,onClick:()=>A(a.name),disabled:a.availability!=="in_stock",children:[a.name,a.availability!=="in_stock"&&e.jsx("span",{className:"out-of-stock-label",children:"Out of Stock"})]},a.name))})]}),e.jsxs("div",{className:"product-actions",children:[e.jsx("button",{className:`add-to-cart-btn ${j?"added":""}`,onClick:E,disabled:((g=s.sizes)==null?void 0:g.length)>0&&!n,children:j?"Added to Cart âœ“":"Add to Cart"}),e.jsxs("button",{className:"try-on-btn",children:[e.jsx("i",{className:"fas fa-camera"}),"Virtual Try-On"]})]}),(s.details.length>0||s.care.length>0)&&e.jsxs("div",{className:"product-additional-info",children:[s.details.length>0&&e.jsxs("div",{className:"product-details",children:[e.jsx("h3",{children:"Product Details"}),e.jsx("ul",{children:s.details.map((a,i)=>e.jsx("li",{children:a},i))})]}),s.care.length>0&&e.jsxs("div",{className:"care-instructions",children:[e.jsx("h3",{children:"Care Instructions"}),e.jsx("ul",{children:s.care.map((a,i)=>e.jsx("li",{children:a},i))})]})]})]})]})}):e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Product Not Found"}),e.jsx("p",{children:"Sorry, we couldn't find the product you're looking for."}),e.jsx("button",{onClick:()=>window.history.back(),children:"Go Back"})]})}export{H as default};
