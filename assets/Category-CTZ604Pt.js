import{a as w,u as I,r as c,j as e}from"./index-6br1IWsU.js";function A(){const{categoryCode:r}=w(),x=I(),[j,y]=c.useState([]),[N,l]=c.useState(!0),[d,P]=c.useState(null);c.useEffect(()=>{r&&(async()=>{const i={method:"GET",headers:{"X-RapidAPI-Key":"79f78136ffmsh2587f6e96e44266p1dddc5jsne1f773947bac","X-RapidAPI-Host":"apidojo-hm-hennes-mauritz-v1.p.rapidapi.com"}};try{l(!0);const t=await fetch(`https://apidojo-hm-hennes-mauritz-v1.p.rapidapi.com/products/list?country=us&lang=en&currentpage=0&pagesize=30&categories=${r}`,i);if(!t.ok)throw new Error("Failed to fetch products");const o=await t.json();if(console.log("Category API Response:",o),o.results&&o.results.length>0){const E=o.results.map(s=>{var m,h,g,p,u,f,v;const b=((m=s.variantSizes)==null?void 0:m.map(n=>({name:n.filterCode||n.name,availability:n.availability||"in_stock"})))||[];return{id:((h=s.defaultArticle)==null?void 0:h.code)||s.code,name:s.name,price:((g=s.price)==null?void 0:g.value)||0,image:((u=(p=s.galleryImages)==null?void 0:p[0])==null?void 0:u.url)||((v=(f=s.images)==null?void 0:f[0])==null?void 0:v.url)||"https://via.placeholder.com/300x400?text=No+Image",category:s.categoryName,description:s.description||"No description available",sizes:b}});y(E)}}catch(t){console.error("Category Error:",t),P(t.message)}finally{l(!1)}})()},[r]);const C=a=>{x(`/product/${a.id}`,{state:{product:{...a,images:[a.image],details:[],care:[]}}})};return N?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loader"}),e.jsx("p",{children:"Loading products..."})]}):d?e.jsx("div",{className:"error-container",children:d}):e.jsxs("div",{className:"category-page",children:[e.jsx("div",{className:"category-header",children:e.jsx("h1",{children:r==null?void 0:r.replace(/_/g," ").toUpperCase()})}),e.jsx("div",{className:"products-grid",children:j.map(a=>e.jsxs("div",{className:"product-card",onClick:()=>C(a),children:[e.jsxs("div",{className:"product-image",children:[e.jsx("img",{src:a.image,alt:a.name,onError:i=>{i.target.onerror=null,i.target.src="https://via.placeholder.com/300x400?text=No+Image"}}),e.jsx("div",{className:"hover-overlay",children:e.jsx("button",{className:"view-button",children:"View Details"})})]}),e.jsxs("div",{className:"product-details",children:[e.jsx("h3",{children:a.name}),e.jsxs("p",{className:"price",children:["$",a.price]})]})]},a.id))})]})}export{A as default};
