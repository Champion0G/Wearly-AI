import{j as e}from"./index-cPf8uUct.js";import{d as a,u as s,b as r}from"./vendor-CY12d32z.js";function i(){const{categoryCode:i}=a(),t=s(),[o,l]=r.useState([]),[c,d]=r.useState(!0),[n,m]=r.useState(null);r.useEffect((()=>{i&&(async()=>{const e={method:"GET",headers:{"X-RapidAPI-Key":"79f78136ffmsh2587f6e96e44266p1dddc5jsne1f773947bac","X-RapidAPI-Host":"apidojo-hm-hennes-mauritz-v1.p.rapidapi.com"}};try{d(!0);const a=await fetch(`https://apidojo-hm-hennes-mauritz-v1.p.rapidapi.com/products/list?country=us&lang=en&currentpage=0&pagesize=30&categories=${i}`,e);if(!a.ok)throw new Error("Failed to fetch products");const s=await a.json();if(console.log("Category API Response:",s),s.results&&s.results.length>0){const e=s.results.map((e=>{var a,s,r,i,t,o,l;const c=(null==(a=e.variantSizes)?void 0:a.map((e=>({name:e.filterCode||e.name,availability:e.availability||"in_stock"}))))||[];return{id:(null==(s=e.defaultArticle)?void 0:s.code)||e.code,name:e.name,price:(null==(r=e.price)?void 0:r.value)||0,image:(null==(t=null==(i=e.galleryImages)?void 0:i[0])?void 0:t.url)||(null==(l=null==(o=e.images)?void 0:o[0])?void 0:l.url)||"https://via.placeholder.com/300x400?text=No+Image",category:e.categoryName,description:e.description||"No description available",sizes:c}}));l(e)}}catch(a){console.error("Category Error:",a),m(a.message)}finally{d(!1)}})()}),[i]);return c?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loader"}),e.jsx("p",{children:"Loading products..."})]}):n?e.jsx("div",{className:"error-container",children:n}):e.jsxs("div",{className:"category-page",children:[e.jsx("div",{className:"category-header",children:e.jsx("h1",{children:null==i?void 0:i.replace(/_/g," ").toUpperCase()})}),e.jsx("div",{className:"products-grid",children:o.map((a=>e.jsxs("div",{className:"product-card",onClick:()=>(e=>{t(`/product/${e.id}`,{state:{product:{...e,images:[e.image],details:[],care:[]}}})})(a),children:[e.jsxs("div",{className:"product-image",children:[e.jsx("img",{src:a.image,alt:a.name,onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/300x400?text=No+Image"}}),e.jsx("div",{className:"hover-overlay",children:e.jsx("button",{className:"view-button",children:"View Details"})})]}),e.jsxs("div",{className:"product-details",children:[e.jsx("h3",{children:a.name}),e.jsxs("p",{className:"price",children:["$",a.price]})]})]},a.id)))})]})}export{i as default};
