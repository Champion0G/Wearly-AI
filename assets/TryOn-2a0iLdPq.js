import{b as x,u as g,r as d,j as e}from"./index-DR5I9B7h.js";function v(){var n;const s=x(),i=g(),[o,u]=d.useState(!1),[r,a]=d.useState(null);if(!((n=s.state)!=null&&n.product))return i("/"),null;const h=async()=>{try{const m=`wearly-${s.state.product.name.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}.jpg`,j=await(await fetch(s.state.product.image)).blob(),l=window.URL.createObjectURL(j),t=document.createElement("a");t.href=l,t.download=m,navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&(t.target="_blank",t.setAttribute("rel","noopener noreferrer")),document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),window.URL.revokeObjectURL(l)},100),u(!0),/Mobi|Android/i.test(navigator.userAgent)&&a("Image saved! Check your Downloads or Gallery.")}catch(c){console.error("Download error:",c),a("Failed to download product image. Please try again.")}},p=()=>{window.open("https://huggingface.co/spaces/Kwai-Kolors/Kolors-Virtual-Try-On","_blank")};return e.jsxs("div",{className:"tryon-page",children:[e.jsx("h1",{children:"Virtual Try-On Experience"}),e.jsxs("div",{className:"tryon-container",children:[e.jsxs("div",{className:"product-section",children:[e.jsx("h2",{children:"Selected Product"}),e.jsxs("div",{className:"product-preview",children:[e.jsx("img",{src:s.state.product.image,alt:s.state.product.name}),e.jsx("h3",{children:s.state.product.name}),e.jsxs("p",{className:"product-price",children:["$",s.state.product.price]})]}),e.jsx("button",{className:"download-button",onClick:h,disabled:o,children:o?"âœ“ Product Image Downloaded":"Download Product Image"})]}),e.jsxs("div",{className:"instructions",children:[e.jsx("h2",{children:"How to Try On This Product"}),e.jsxs("div",{className:"steps-container",children:[e.jsxs("div",{className:"step",children:[e.jsx("div",{className:"step-number",children:"1"}),e.jsx("p",{children:"Download the product image using the button above"})]}),e.jsxs("div",{className:"step",children:[e.jsx("div",{className:"step-number",children:"2"}),e.jsx("p",{children:'Click "Open Virtual Try-On" to access the Kolors tool'})]}),e.jsxs("div",{className:"step",children:[e.jsx("div",{className:"step-number",children:"3"}),e.jsx("p",{children:"In the Kolors tool:"}),e.jsxs("ul",{children:[e.jsx("li",{children:'Upload your full-body photo in the "Person image" section'}),e.jsx("li",{children:'Upload the downloaded product image in the "Garment image" section'}),e.jsx("li",{children:'Click "Run" to see yourself wearing the product!'})]})]})]})]}),e.jsx("button",{className:"try-on-button",onClick:p,children:"Open Virtual Try-On"}),r&&e.jsx("div",{className:"error-message",children:e.jsx("p",{children:r})})]})]})}export{v as default};
